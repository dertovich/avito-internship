# avito-internship

Сервис динамического сегментирования пользователей, хранящий пользователя и сегменты, в которых он состоит (создание, изменение, удаление сегментов, а также добавление и удаление пользователей в сегмент)

Используемые технологии:
- PostgreSQL (в качестве хранилища данных)
- Docker (для запуска сервиса)
- chi (веб фреймворк)
- pg (драйвер для работы с PostgreSQL)

# Description
Было выполнено минимальное задание:
- Метод создания сегмента. Принимает slug (название) сегмента.
- Метод удаления сегмента. Принимает slug (название) сегмента.
- Метод добавления пользователя в сегмент. Принимает список slug (названий) сегментов которые нужно добавить пользователю, список slug (названий) сегментов которые нужно удалить у пользователя, id пользователя.
- Метод получения активных сегментов пользователя. Принимает на вход id пользователя.


#### Структура проекта
- cmd/segment-service содержит main.go
- internal/config содержит методы обработки файла конфига
- internal/http-server/handlers содержит хэндлеры запросов
- internal/http-server/middleware/logger содержит метод логгирования хэндлеров
- internal/lib/api/response содержит структуры ответа на запрос и валидации ошибок
- internal/lib/logger содержит функции лога, которая часто встречается в других методах
- 


# Usage

Запустить сервис можно с помощью команды `docker-compose up`

# Decisions <a name="decisions"></a>

В ходе разработки возникали трудности, но одна оказалась выше моих познаний и умений гуглить. Уделите пожалуйста немного времени и дайте фидбэк по проекту (@ezehrd)

Делая любой запрос через postman или curl, возвращается ответ что запрос выполнен. 

![image](https://github.com/dertovich/avito-internship/assets/86295099/53512237-ac5b-486c-bfa2-0fcf11d1fff6)

При просмотре логов обнаруживаю, что записано было 0 байт.
![image](https://github.com/dertovich/avito-internship/assets/86295099/4e80782a-8101-4571-ba82-796a421f72a0)

В БД очевидно не был добавлен сегмент(сегмент на картинке было добавлен до запроса)
![image](https://github.com/dertovich/avito-internship/assets/86295099/06e2ace1-f779-47ee-906e-7d800eed492d)

Итак происходит с каждым запросом. 

Спасибо за Ваше время!
